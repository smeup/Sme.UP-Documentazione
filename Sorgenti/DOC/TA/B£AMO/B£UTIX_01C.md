# AVVERTENZE

_1_E' MOLTO IMPORTANTE LEGGERE ATTENTAMENTE QUESTA DOCUMENTAZIONE PRIMA DI ESEGUIRE OGNUNA DELLE AZIONI RIPORTATE SULLA SINISTRA

# OBIETTIVI

Questa scheda si pone questi obiettivi : 
\* Dare una traccia di massima delle azioni da eseguire
\* Fornire le funzioni necessarie all'esecuzione delle principali azioni di aggiornamento
**Non si pone invece l'obiettivo di poter completare l'adeguamento al nuovo assoggettamento in modo totalmente automatico. Per tale motivo, una volta presa coscienza delle principali caratteristiche di ognuna delle azioni riportate a seguire, qualora tali specifiche non rispecchiassero la realtà aziendale si consiglia di applicare le opportune modifiche al pgm di esecuzione. 

# NOTE GENERALI

\* Ogni azione può essere eseguita con un doppioclick o premendo il tasto invio sul nodo dell'albero posto sulla sinistra
\* All'esecuzione per tutte le azioni che comportano un aggiornamento dei dati verrà comunque richiesta un'azione di conferma prima dell'effettiva esecuzione
\* Ogni azione può anche essere eseguita più volte, senza che vi sia pericolo di aggiornamenti anomali dei dati
\* Se sul sistema sono presenti più ambienti, al netto di avere già una conoscenza precisa della struttura di tali ambienti, è necessario eseguire le azioni su ognuno degli ambienti. Se vi sono dati in comune su questi ambienti, quando l'azione su tali dati verrà ripetuta, l'effetto sarà semplicemente il fatto che non verranno riscontrati dati da aggiornare.
\* In linea generale queste azioni assumono che il codice azienda sia stato fissato nella tabella B£2. Se così non fosse sarà necessario intervenire nei programmi di esecuzione in modo opportuno.

# AZIONI

- Creazione/Controllo Alias C£K :  questa istruzione permette di creare l'elemento della tabella C£K avente codice "TAIVA" (+codice azienda se previsto come sottosettore nella tabella IVA).  E' prerequisito fondamentale e se l'elemento esiste già verrà richiesto di ricrearlo. E' fortemente consigliato di farlo, verificando l'eventuale pre-utilizzo che era stato fatto dell'elemento.
- Controllo codici IVA :  vengono esposti gli elementi della tabella IVA con aliquota al 20%. Per ognuno di essi viene data indicazione della presenza o meno della corrispondenza con un codice iva con aliquota al 21%. E' inoltre presente l'indicazione di eventuali messaggi di errore  in caso di incongruenza fra i due codici. Se per uno o più codici non risulta necessario indicare la corrispondenza è sufficiente non dare alcuna indicazione, in questo caso nelle azioni successive il codice non verrà elaborato _1_NOTA BENE :  non è necessario che il codice indicato come alias sia stato già creato nella tabella IVA, infatti tramite il tasto funzione F07, dopo aver completato l'inserimento delle corrispondenze, sarà possibile creare in automatico i nuovi codici della tabella IVA (sostituendo l'aliquota al 20 con l'aliquota al 21 non solo nel campo, ma anche nella descrizione del nuovo assoggettamento).  E' disponibile anche il tasto funzione F02, tramite il quale è possibile richiamare la gestione degli alias. Indicando qui nel campo contesto TAIVA  (+codice azienda se previsto come sottosettore nella tabella IVA) , nel campo Assoggettamento IVA il codice al 20, l'opzione 01 e premendo invio, nel campo Alias della schermata che si aprirà si potrà indicare il corrispondente codice al 21. Si consiglia di produrre una stampa del medesimo prospetto una volta  che l'operazione è stata completata. Per fare questo è sufficiente dall'etichetta della matrice premere tasto destro, visualizza come, report.
- Controllo Anagrafiche Articoli :  all'esecuzione verrà prodotto uno spool di stampa con l'indicazione dei codici articolo sui quali verrà applicata la sostituzione del codice iva basata sulla corrispondenza definita dal punto precedente.
- Controllo Anagrafiche Enti :  all'esecuzione verrà prodotto uno spool di stampa con l'indicazione dei soggetti sui quali verrà applicata la sostituzione del codice iva basata sulla corrispondenza definita dal punto 2. Oltre che all'anagrafica di base, verrà adeguata anche l'estensione £14 - Dati specifici per modello.
NOTA BENE :  vengono controllati solo i campi di cui esiste un utilizzo standard. Ad esmepio i campi Ass. Iva 2 (E§CTA2) e Ass. Iva 3 (E§CTA3) non vengono in alcun modo interessati da questa utility. Se tali campi sono stati utilizzati presso l'installazione specifica sarà necessario personalizzare l'utility per gestirli nel modo più oppportuno.
- Controllo Ordini :  all'esecuzione verrà prodotto uno spool di stampa con l'indicazione degli ordini aperti (testate e righe) sui quali verrà applicata la sostituzione del codice iva basata sulla corrispondenza definita dal punto 2. Verranno presi in considerazione i documenti con le caratteristiche riportate di seguito. La stampa indicherà (con note a fine riga) eventuali situazioni potenzialmente anomale e quindi da verificare manualmente :  Stato 0, 3, 4, 5, 6 e 7 o Tipo modello non impostato e non reperibile._1_NOTA BENE :  Questo è il punto che più si predispone all'introduzione di eventuali rettifiche. In caso di opportunità il pgm di esecuzione da adeguare è il pgm B£UTIX_01D routine E_V5DOC_O. In relazione a questo caso viene ricordata in particolare una personalizzazione abbastanza frequente per la quale nel cord del documento viene memorizzato anche l'assoggettamento iva. Nel caso può essere aggiunto dopo l'UPDATE del V5TDOC il richiamo del V5DO01O. Per l'identificazione degli ordini
vengono ricercate le testate e conseguentemente le righe aperte secondo i seguenti criteri : 
-- record con livello <"8"
-- il tipo modello del documento corrispondente ai codici AB, AC, AO, PB, PC, PO (Contratti, Canoni, Ordini/Previsioni del ciclo attivo e passivo)
- Controllo Bolle :  all'esecuzione verrà prodotto uno spool di stampa con l'indicazione delle bolle con data bolla (T§DBOL), superiore al 16/09/2011 sui quali verrà applicata la sostituzione del codice iva basata sulla corrispondenza definita dal punto 2. Le bolle fra tutti i documenti verranno identificati in base alla semplicemente presenza della data bolla. Per  questi documenti saranno sempre aggiornati (indifferentemente dal livello) sia le righe che le testate. _1_NOTA BENE :  anche per questo caso può predisporsi in modo particolare ad eventuali rettifiche. Anche qui può presentarsi come per gli ordini il caso dell'assoggettamento memorizzato come campo del CORD. In fase di passaggio al nuovo assoggettamento potrebbe presentarsi inoltre la casistica delle pre-bolle, cioè di documenti non ancora stampati, ma già predisposti. In caso di opportunità il pgm di esecuzione da adeguare è il pgm B£UTIX_01D routine E_V5DOC_B.
- Controllo Tabelle :  vengono controllati i campi referenziati agli assoggettamenti iva delle tabelle :  V51, C51, BRA, C6S, G9S e C5U.
- Aggiornamento Anagrafiche Articoli :  viene eseguita la stessa azione del punto 3, con la sola differenza che tramite questa azione verrà anche eseguito l'aggiornamento fisico dei dati.
- Aggiornamento Anagrafiche Enti :  viene eseguita la stessa azione del punto 4, con la sola differenza che tramite questa azione verrà anche eseguito l'aggiornamento fisico dei dati.
- Aggiornamento Ordini :  viene eseguita la stessa azione del punto 5, con la sola differenza che tramite questa azione verrà anche eseguito l'aggiornamento fisico dei dati.
- Aggiornamento Bolle :  viene eseguita la stessa azione del punto 6, con la sola differenza che tramite questa azione verrà anche eseguito l'aggiornamento fisico dei dati.
- Aggiornamento Tabelle :  viene eseguita la stessa azione del punto 7, con la sola differenza che tramite questa azione verrà anche eseguito l'aggiornamento fisico dei dati. Per la C5U se sono presenti elementi corrispondenti all'assoggettamento al 20 verranno creati dei duplicati riferiti agli elementi al 21.
- Gestione Parametri Autofattura :  tramite questa azione è possibile adeguare "manualmente" gli eventuali assoggettamenti previsti per la creazione dei documenti di autofattura. Se non risulta inserito alcun elemento non bisognerà eseguire alcuna azione.
- Controllo Utilizzo V5S :  viene presentata una matrice con l'elenco dei codici della V5S che presentano l'indicazione di un assoggettamento fisso al 20%. Per ognuno di questi elementi verranno riportate le informazioni elencate di seguito. Sulla base delle di queste informazioni andranno applicate le indicazioni riportate nell'apposito documento. La sostituzione dei codici iva al 20 con i rispettivi codici iva al 21 andrà effettuata manualmente seguendo le istruzioni della specifica documentazione. Le informazioni riportate nella matrice quindi le seguenti : 
-- il codice iva al 21 previsto in corrispondenza
-- se l'elemento della V5S è stato indicato nella tabella V51
-- se l'elemento della V5S è stato indicato in almeno un elemento della tabella V5D
-- se l'elemento della V5S è stato indicato almeno una volta esplicitamente in un record del file delle testata dei documenti
-- la data di ultimo utilizzo dell'elemento della V5S. Questa viene determinata in questo modo :  se l'elemento è stato utilizzato nella data V51 viene sempre indicata la data odierna, negli altri casi viene riportata la data più recente fra i tipi documento utilizzati ed i documenti che riportavano l'elemento in modo esplicito.
- Gestione Parametri Tabella IVA :  questa azione serve solo per controllare se siano stati previsti dei parametri specifici per gli elementi della tabella IVA. Nel qual caso si dovrà valutare come adeguare i valori dei codici corrispondenti con aliquota 21.
- Controllo utilizzo tabella IVA nei parametri :  viene riportato l'elenco degli eventuali parametri che prevedono l'indicazione di un assoggettamento IVA. Andranno poi fatte le dovute valutazioni di ogni caso. Vengono escluse le tabelle standard controllare dai punti precedenti. NOTA BENE :  Nella sezione di destra non vengono riportate esattamente le C£E corrispondenti all'elemento della B£N ma solo quelle che vi corrispondono per sottosettore.
- Controllo utilizzo tabella IVA nelle griglie :  viene riportato l'elenco delle eventuali griglie che prevedono l'indicazione di un assoggettamento IVA. Sulla destra vengono riportati tutti campi di tabella che puntano ad un griglia e tutti gli elementi di tali tabelle che hanno come valore di griglia il codice selezionato al momento nella sezione di sinistra. Andranno poi fatte le dovute valutazioni di ogni caso.
- Controllo utilizzo tabella IVA negli attributi :  viene riportato l'elenco delle eventuali attributi che prevedono il reperimento di un assoggettamento IVA. Verrano riportati tutti gli attributi, anche se dovrebbero essere oggetto di controllo solo gli attributi che inziano per "U/". Questo, purchè si siano mantenute le denominazioni standard. Andranno poi fatte le dovute valutazioni di ogni caso.
- Controllo utilizzo tabella IVA nei campi di tabella  :  viene riportato l'elenco delle eventuali campi di tabella che prevedono l'indicazione di un assoggettamento IVA. Sono escluse tutte le tabelle standard già oggetto di una delle precedente azioni. La tabella SPS se segnalata, non ha un utilizzo nello standard, va quindi solo verificato se sia in utilizzo in uno dei pgm standard. Andranno poi fatte le dovute valutazioni di ogni caso.
- Controllo Sorgenti :  tramite questa azione è possibile semplicemente lanciare la funzione di analisi dei sorgenti. Tale funzione dovrebbe essere parametrizzata in moda indicare come librerie di ricerca quelle utilizzate per le personalizzazioni, mentre come stringhe di ricerca è consigliabile eseguire la funzione più volte cercando ed esempio :  i codici iva con aliquota 20, unla dicitura "T$ALIQ", "IVA" o anche solo la dicitura "20" (poi per quest'ultimo caso nello spool prodotto le diciture "MULT", "DIV", "\*20", "\*120", "/20" "/120").   Oltre a questi si potrebbero cercare eventuali costanti (nome campi tabella, attributi ecc.) riscontrati dalle precedenti ricerche.



A tutto questo si aggiunge ogni eventuale ulteriore considerazione si possa valutare necessaria.
